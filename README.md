# angel-happy-paw
# 📖 天使笑長「幸福教養概念館」PWA 開發與設計白皮書

## 一、 品牌靈魂與定位 (Brand Identity)
* **核心人物**：**天使笑長 (Angel)**。退休國小教師，家長的「正能量女神」與「笑長」。
* **使命願景**：結合「心腦科學」實踐，讓愛發揮力量，推廣幸福教養，陪伴孩子成為「飛得慢的衛星」。
* **視覺規範**：
    * **主色調**：療癒莫蘭迪綠 (`#8FB9A8`)。
    * **氛圍**：專業、溫暖、寧靜、充滿正能量。

## 二、 技術架構 (Technical Stack)
* **後端資料庫**：Google Sheets (試算表)。
* **API 介面**：Google Apps Script (GAS) 輸出 JSON 資料。
* **前端技術**：Vanilla JavaScript (原生 JS), HTML5, CSS3。
* **離線支援**：PWA 架構 (Service Worker `sw.js` + Web Manifest)。
* **自動連動**：支援「下拉刷新 (Pull-to-Refresh)」與「API 快取爆破 (Cache Busting)」。

## 三、 資料匹配邏輯 (Data Matching Principles)
這是維持「自動化更新」的核心規則，開發者必須嚴格遵守：

### 1. 欄位處理規則
* **防呆機制**：所有欄位名稱與內容讀取時，必須執行 `.trim()` 去除首尾空白，確保資料匹配成功。
* **發布控管**：僅讀取「發布狀態」欄位中包含「上架」或「發佈」字樣的列數。

### 2. 影音與工具自動分流 (核心算法)
* **雙欄位掃描**：系統會同時檢查「核心理念」與「影音連結」欄位。
* **識別邏輯**：
    * **YouTube 內容**：連結包含 `youtube.com` 或 `youtu.be` 時 $\rightarrow$ 自動生成預覽封面與播放按鈕。
    * **實踐工具內容**：若連結為非 YouTube 格式 $\rightarrow$ 自動轉化為「🚀 取用實踐工具」按鈕。
* **按鈕樣式**：使用 CSS 強制渲染 (`display:block !important`)，確保按鈕在各種環境下清晰可見。

### 3. 展示廳歸類
* **四大展廳**：根據「展示廳」關鍵字（心腦、心靈、關係、生命）自動分流。
* **實踐工房 (Dojo)**：具備二級分類邏輯，透過標題關鍵字自動歸入「🆘緊急、🧘心靈、🔍檢測、📚教養、💡其他」。

## 四、 未來擴充藍圖 (Future Roadmap)
* **幸福智多星**：預留搜尋接口，未來將實作「問題輸入 -> 影音/工具自動匹配」功能。
* **Firebase 整合**：預留帳號登入 (Auth) 與 Firestore (資料存儲) 的接口，準備實現個人化教養進度追蹤。

## 五、 協作備註 (Important Notes for Collaboration)
1. **結構不精簡**：禁止刪除 HTML 中的 PWA 更新監聽與下拉刷新代碼。
2. **音訊人格一致性**：
    * 週一：療癒系成熟女聲 (治療感)。
    * 週四：智性科學男聲 (知識感)。
    * 週六：親切台灣女聲 (天使笑長本人、笑長性格)。
